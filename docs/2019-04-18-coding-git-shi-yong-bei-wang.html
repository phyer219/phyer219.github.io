<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
  <title>从冰上的水 - Git 使用备忘</title>
  <meta name="generator" content="Pelican" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
           <link rel="stylesheet" type="text/css" href="/theme/css/style.css" />
  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Long+Cang&family=Noto+Serif+SC&display=swap" rel="stylesheet" />
  <!--fonts end  -->
  <!-- highlight.js -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <!-- highlight.js end -->

<script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">




    <meta name="tags" content="hexo" />
    <meta name="tags" content="git" />

</head>

<body class="star-background">
  <div class="container">
    <header>
      <section class="banner">
        <img id="banner-img" src="/images/banner.jpg" alt="banner-img" />
      </section>
    </header>
    <nav class="row">
      <a class="nav" href="/">首页</a>
      <a class="nav" href="/categories.html">分类</a>
      <a class="nav" href="/tags.html">标签</a>
        <a class="nav" href="/pages/about.html" aria-current="page">
        关于
      </a>
     </nav>

    <main>
  <h1 class="post-title">Git 使用备忘</h1>

<section class="post-meta">
    <p>发表于: 2019-04-18 ||</p>
    <p>分类:<a class="post-link" href="/category/ruan-jian-shi-yong.html">软件使用</a> ||</p>
</section>

<section class="post-content">
  
<h2>基本命令</h2>

<h3>本地</h3>

<h4>必备操作</h4>

<h5>基本</h5>

<p>初始化 repository</p>
<pre><code class="language-shell">git init</code></pre>
<p>添加变动到 stage</p>
<pre><code class="language-shell">git add &lt;filename&gt;</code></pre>
<p>提交变动</p>
<pre><code class="language-shell">git commit -m "some comment ..."</code></pre>

<h5>分支</h5>

<p>查看分支</p>
<pre><code class="language-shell">git branch</code></pre>
<p>创建分支</p>
<pre><code class="language-shell">git branch &lt;name&gt;</code></pre>
<p>切换分支</p>
<pre><code class="language-shell">git checkout &lt;name&gt;</code></pre>
<p>创建+切换分支</p>
<pre><code class="language-shell">git checkout -b &lt;name&gt;</code></pre>
<p>合并某分支到当前分支</p>
<pre><code class="language-shell">git merge &lt;name&gt;</code></pre>
<p>删除分支</p>
<pre><code class="language-shell">git branch -d &lt;name&gt;</code></pre>


<h4>辅助操作</h4>

<p>查看当前仓库的状态</p>
<pre><code class="language-shell">git status</code></pre>
<p>查看文件的不同</p>
<pre><code class="language-">git diff &lt;filename&gt;</code></pre>
<p>回到哪个版本</p>
<pre><code class="language-shell">git reset --hard commit_id</code></pre>
<p>查看提交历史(图形化), 以便确定退回到哪个版本</p>
<pre><code class="language-shell">git log --graph</code></pre>
<p>重返未来</p>
<pre><code class="language-shell">git reflog</code></pre>
<p>把文件在工作区的修改全部撤销</p>
<pre><code class="language-shell">git checkout -- &lt;filename&gt;</code></pre>
<p>git reset HEAD <filename>
删除</p>
<pre><code class="language-shell">git rm</code></pre>

<h4>高级操作</h4>

<p>工作现场</p>
<pre><code class="language-shell">git stash</code></pre>
<pre><code class="language-shell">git stash pop</code></pre>
<p>分叉的历史整理成直线</p>
<pre><code class="language-shell">git rebase</code></pre>

<h4>标签操作</h4>

<h5>基本操作</h5>

<p>新建一个标签, 默认为 <HEAD> , 也可以指定一个 commit ID</p>
<pre><code class="language-shell">git tag &lt;tagename&gt;</code></pre>
<p>tag 时指定标签名, 指定描述</p>
<pre><code class="language-shell">git tag -a &lt;tagname&gt; -m "describ ..."</code></pre>
<p>查看所有标签</p>
<pre><code class="language-shell">git tag</code></pre>

<h5>高级操作</h5>

<p>推送一个本地标签</p>
<pre><code class="language-shell">git push origin &lt;tagname&gt;</code></pre>
<p>推送全部未推送过的本地标签</p>
<pre><code class="language-shell">git push origin --tags</code></pre>
<p>删除一个本地标签</p>
<pre><code class="language-shell">git tag -d &lt;tagname&gt;</code></pre>
<p>删除一个远程标签</p>
<pre><code class="language-shell">git push origin :refs/tags/&lt;tagname&gt;</code></pre>

<h3>远程操作</h3>

<p>关联一个远程库</p>
<pre><code class="language-shell">git remote add origin git$server-name:path/repo-name.git</code></pre>
<p>推送 (我们第一次推送master分支时，加上了-u参数，Git不但会把本地的
master分支内容推送的远程新的 master 分支，还会把本地的 master 分支和远
程的 master 分支关联起来，在以后的推送或者拉取时就可以简化命令)</p>
<pre><code class="language-shell">git push -u origin master</code></pre>
<p>克隆</p>
<pre><code class="language-shell">git clone</code></pre>

<h2>实践一: 博客备份</h2>

<h3>本地操作</h3>

<p>进入到博客的根目录, 一定要记得先删除主题文件夹下的 .git/ 文件夹, 不然就会产生 submodules ,
从而导致无法 commit 主题. 比如要备件 next 主题</p>
<pre><code class="language-shell">rm -r themes/next/.git/</code></pre>
<p>这时就可以初始化 git了</p>
<pre><code class="language-shell">git init</code></pre>
<p>然后添加所有的文件到 stage</p>
<pre><code class="language-shell">git add .</code></pre>
<p>检察有没有问题</p>
<pre><code class="language-shell">git status</code></pre>
<p>结果一片绿就没有问题了!</p>

<p>接下来提交备份</p>
<pre><code class="language-shell">git commit -m "first backup"</code></pre>
<p>想备份到和 githubpages 一个 repository , 所以要另外建一个分支, 名为 backup</p>
<pre><code class="language-shell">git checkout -b backup</code></pre>

<h3>备份到 github</h3>

<p>与 github 关联</p>
<pre><code class="language-shell">git remote add origin git@github.com:phyer219/phyer219.github.io.git</code></pre>
<p>将本地的 backup 分支推到 github</p>
<pre><code class="language-shell">git push origin backup</code></pre>
<p>备份完成!</p>

<p>以后每次备份都直接</p>
<pre><code class="language-shell">git add .
git commit -m "new blog ..."
git push origin backup</code></pre>
<p>即可完成备份!</p>

<h3>恢复</h3>

<p>备份好以后, 如果在另一台设备上(已经安装好 hexo)恢复, 首先到一个要恢复的文件夹, 然后
clone 下来 backup 分支</p>
<pre><code class="language-shell">git clone -b backup git@github.com:phyer219/phyer219.github.io.git</code></pre>
<p>执行</p>
<pre><code class="language-shell">npm install</code></pre>
<p>然后本地测试是否备份成功</p>
<pre><code class="language-shell">hexo s</code></pre>
<p>以后每次从 back up 中更新直接</p>
<pre><code class="language-shell">git pull</code></pre>
<p>即可!</p>

<h2>Reference</h2>

<p><a href='https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000'>https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000</a></p>

</section>

<section class="post-meta">
    <p>标签:
        <a class="post-link" href="/tag/hexo.html">hexo</a>
        <a class="post-link" href="/tag/git.html">git</a>
    </p>
</section>

    </main>
    <footer>© 2018 - 2025 ZQW</footer>
  </div>
</body>

</html>