<!DOCTYPE html>
<html lang="zh_cn">

<head>
    <title>从冰上的水 - Atomic and Optical Physics I, 05 Resonance V and Atoms I</title>
  <meta charset="utf-8" />
  <meta name="generator" content="Pelican" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link
    href="https://zqw.ink/feeds/all.atom.xml"
    type="application/atom+xml" rel="alternate" title="从冰上的水 Full Atom Feed" />
  <link
    href="https://zqw.ink/feeds/zhuan-ye-bi-ji.atom.xml"
    type="application/atom+xml" rel="alternate" title="从冰上的水 Categories Atom Feed" />
  <link rel="stylesheet" type="text/css" href="https://zqw.ink/theme/css/style.css" />
  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Long+Cang&family=Noto+Serif+SC&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.6.1/github-markdown.min.css" integrity="sha512-wpdV3v8V8vWajD1kH8rI1UO1H2q9TQ3s8o1mG7lH8fS1dZ+3q1B1p4lH2tF8rQm2u0n8oV6rN3tV4nQWmY4nTw==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <!--fonts end  -->
  <!-- highlight.js -->
  <link id="hljs-light" rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" disabled>
  <link id="hljs-dark" rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" disabled>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
    (function () {
      const light = document.getElementById('hljs-light');
      const dark = document.getElementById('hljs-dark');
      if (!light || !dark) return;

      function resolveTheme() {
        return document.documentElement.getAttribute('data-theme') || 'light';
      }

      function applyTheme(theme) {
        const isDark = theme === 'dark';
        light.disabled = isDark;
        dark.disabled = !isDark;
      }

      const observer = new MutationObserver(function () {
        applyTheme(resolveTheme());
      });
      observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
      applyTheme(resolveTheme());
    })();
  </script>
  <!-- highlight.js end -->

<script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1">




    <meta name="tags" content="Rabi frequency" />
    <meta name="tags" content="adiabatic" />
    <meta name="tags" content="Atomic and Optical Physics" />
    <meta name="tags" content="density matrix" />
    <meta name="tags" content="density operator" />
    <meta name="tags" content="quantum defect" />

</head>

<body>
  <header>
    <div id="header-container">
      <button id="nav-toggle" class="nav-toggle" aria-label="打开菜单" aria-expanded="false">
        <i class="fa-solid fa-bars" aria-hidden="true"></i>
      </button>
      <nav id="site-nav">
        <ul>
            <li>
              <a href="/">Home</a>
            </li>
            <li>
              <a href="/category/physics">Physics</a>
            </li>
            <li>
              <a href="/category/blog">Blog</a>
            </li>
            <li>
              <a href="/category/coding">Coding</a>
            </li>
            <li>
              <a href="/archives">All</a>
            </li>
          </ul>
      </nav>
      <div class="header-actions">
        <button id="theme-toggle" aria-label="切换到深色模式" title="切换主题">
          <i class="theme-icon icon-sun fa-solid fa-sun" aria-hidden="true"></i>
          <i class="theme-icon icon-moon fa-solid fa-moon" aria-hidden="true"></i>
        </button>
        <div class="rss">
            <a href="https://zqw.ink/feeds/all.atom.xml" aria-label="Atom 订阅">
              <i class="fa-solid fa-rss" aria-hidden="true"></i>
            </a>
        </div>
      </div>
    </div>
  </header>
  <main>

<h1 class="post-title">Atomic and Optical Physics I, 05 Resonance V and Atoms I</h1>

<section class="post-meta">
    <p>2021-11-24</p>
    <p>-<a class="post-link" href="https://zqw.ink/category/zhuan-ye-bi-ji.html">专业笔记</a></p>
</section>

<section class="markdown-body">
  
<h2>Information</h2>
<ul>
<li>官方介绍: https://ocw.mit.edu/courses/physics/8-421-atomic-and-optical-physics-i-spring-2014/</li>
<li>视频列表地址: https://www.youtube.com/playlist?list=PLUl4u3cNGP62FPGcyFJkzhqq9c5cHCK32</li>
</ul>
<h2>Need for Density Operator</h2>

<p>Schrodinger Equations deals only with pure states, can not describe loss and
coherence.</p>

<p>Exception:
<p><img src='2021-11-24-physics-MITAMO05/loss.png' alt='figalt' max-width:100%><p></p>

<p>can be still use a Hamiltonian with complex eigenvalues. 因为这种情况下我们只关
心 $|e\rangle, |g\rangle$ 两个态, 不关心 decay 到的态</p>

$$\begin{align}
  E_g \rightarrow E_g + \frac{\mathrm{i}\Gamma_{gl}}{2}
\end{align}$$


<p>However, many other proceesses require density matrix, such as spontaneous
emission
<p><img src='2021-11-24-physics-MITAMO05/spontaneous.png' alt='figalt' max-width:100%><p>
因为此时我们对两个态都关心.</p>

<h2>Density Operator</h2>

<p>把态 $|\psi\rangle$ 在基底下展开</p>

$$\begin{align}
|\psi(t)\rangle = \sum_n c_n(t) |\psi_n\rangle
\end{align}$$

<p>Operator $A$ 的期望为</p>

$$\begin{align}
\langle A\rangle_t =& \langle \psi(t) | A | \psi(t)\rangle = \sum_{m, n} c_m(t) c_n^{*}(t)A_{nm} \\
  =& \sum_{m, n} \rho_{mn}(t) A_{nm} = \mathrm{Tr}(\rho(t) A)
\end{align}$$

<p>where</p>

$$\begin{align}
A_{nm} =& \langle \psi_n |A|\psi_m\rangle \\
\rho_{mn} =& c_m(t) c_n^{*}(t) \\
\rho(t) =& |\psi(t)\rangle \langle\psi(t)|
\end{align}$$

<p>$\rho_{mn}$ : populations, $\rho_{mm}$ : coherence.</p>

<p>Now, 考虑一个混合态 $\sum_i P_i|\psi_i(t)\rangle = \sum_i\sum_n P_ic_n^i(t)|\psi_n\rangle$ , 相应的</p>

$$\begin{align}
\rho(t) = \sum_i P_i |\psi_i(t)\rangle \langle\psi_i(t)|
\end{align}$$

<p>此时 $A$ 的期望为还可以写为</p>

$$\begin{align}
\langle A\rangle_t = \mathrm{Tr}(\rho(t) A)
\end{align}$$

<p>不过此时 $\langle A\rangle$ 有 two averages: quantum average, ensemble average with $P_i$
. The advantage of the density matrix formalism is that two kinds of averages
can be done simultaneously in a very compact formalism!</p>

<p>Apply Schrodinger equation to each $\psi_i$ , we get</p>

$$\begin{align}
\mathrm{i}\hbar \dot{\rho} = [H, \rho]
\end{align}$$


<p>Properties</p>

$$\begin{align}
\mathrm{Tr} \rho =& \sum_iP_i = 1 \\
\mathrm{Tr} \rho^2 =& \sum_i P_i^2 \le 1 \\
               =& 1 \quad \mathrm{for\,pure\,state}
\end{align}$$


<p>So far, I've presented you the density matrix just as an elgent way of
integrating the two averages into one formalism. And in essence, this is what it
is. But you can now also use the density if the wholes system undergoes a time
evolution, which is no longer unitary, no longer described by Hermition
operator. Because you're interested in the time evolution or a small system,
which is a part of a bigger system. The bigger system is always described by
unitary time evolution, but smaller system is usually not described by unitary
time evolution. And that's when the density matrix becomes crucial.</p>

<p>Next: use $\rho$ for no-unitary time evolution. Often open systems (small system,
but open to a bigger system. Like we are interested to describe an atom, but
the atom can spontaneously emit photons into other parts of Hilbert space, and
we're not interested in thoses other parts.) Where we limit our description to a
small part of larger system. An atom interacting with all the modes of the
electromagnetic field, but we are simply want to describe the atom. And then, we
cannot use a wave function anymore. We have to use the density matrix.</p>

<h2>Density Matrix for Arbitrary Two-level System</h2>

<p>General Hamiltonian for two-level System</p>

$$\begin{align}
H = \frac{\hbar}{2}\left(\bar{\omega} I + \omega_{1}\sigma_{x} + \omega_2\sigma_y + \omega_3\sigma_z \right)
\end{align}$$

<p>By appropriately shifting what is the zero point of energy, we can set $\bar{\omega}
= 0$</p>

$$\begin{align}
H = \frac{\hbar}{2}\left(\omega_{1}\sigma_{x} + \omega_2\sigma_y + \omega_3\sigma_z \right) = \frac{\hbar}{2} \vec{\omega} \cdot\vec{\sigma}
\end{align}$$

<p>General density matrix</p>

$$\begin{align}
\rho = \frac{1}{2} \left( r_0 I + r_1\sigma_x + r_2\sigma_y +r_3\sigma_z \right)
\end{align}$$

<p>Of course, this time we cannot throw away the unity matrix, because otherwise
the density matrix would have no trace. 但是 $\mathrm{Tr}\rho = 1$ , 所以 $r_0 =
1$</p>

$$\begin{align}
\rho = \frac{1}{2} \left( I + \vec{r}\cdot\vec{\sigma} \right)
\end{align}$$

<p>$\vec{r}$ is called <em>Bloch Vector</em> . Use equation of motion $\mathrm{i}\hbar\dot{\rho}
= [H, \rho]$ we get (checked! Exercise)</p>

$$\begin{align}
\dot{\vec{r}} = \vec{\omega}\times \vec{r}
\end{align}$$

<p>We see, the length of $\vec{r}$ is a constant. It is a precession! We
generalizes our previous result $\dot{\vec{S}} = \vec{\omega} \times \vec{S}$ .</p>

<blockquote>Feynman, R. P., Vernon, F. L. & Hellwarth, R. W. Geometrical Representation of
the Schrödinger Equation for Solving Maser Problems. Journal of Applied Physics
28, 49–52 (1957).

Theory by Feymman, Vernon and Hellwarth:

The time evolution of the density matrix for the most general two-level system
is isomorphic to the behavior of classical moment in a suitable time dependent
magnetic field.</blockquote>

<p>Note: Pure state will stay pure forever. Because</p>

$$\begin{align}
\mathrm{Tr}\rho^2 = \frac{1}{2}(r_0^2 + |\vec{r}|^2) = \mathrm{const.}
\end{align}$$

<p>Does not describe loss of coherence.</p>

<h2>Bloch Equation (1946), Relaxation</h2>

<p>Everything has to come to thermal equilibrium.</p>

<p>The density matrix of thermal equilibrium, which has only diagonal matrix
elements, the populations follow the Boltzmann factor</p>

$$\begin{align}
\rho^T = \frac{1}{z} e^{-\frac{H}{k_B T}}
\end{align}$$

<p>Relaxation will restore $\rho$ to $\rho^T$ .</p>

<p>Phenomenological treatment of damping:</p>

$$\begin{align}
 \dot{\rho} = \frac{1}{\mathrm{i}\hbar} [H, \rho] - \frac{\rho - \rho^T}{T_e}
\end{align}$$

<p>where $T_e$ is equilibrium time. The second term will damp the density matrix to
the thermal equilibrium density.</p>

<p>In many cases, there are two relation times</p>

<ul>
<li>$T_1$ : population different energy decay time, $\dot{r}_z = (\vec{\omega}\times \vec{r})_z - (r_z - r_z^T)/T_1$ .</li>
<li>$T_2$ : coherence, dephasing time, $r_1, r_2$ .</li>
</ul>
<p>whem quantum system lose its memory of phase, the $r_1, r_2$ components of the
Bloch vector goes to $0$ . $r_1, r_2$ only nonzero if you have two states populated with a
well-defined relative phase.</p>

<h2>Atoms Sayllabus</h2>

<blockquote>Kleppner, D. The Yin and Yang of Hydrogen. Physics Today 52, 11–13 (1999).</blockquote>

<p>First: electronic structure:</p>

<ul>
<li>1 e, H</li>
<li>2 e, He</li>
</ul>
<p>Then:</p>

<ul>
<li>Fine structure</li>
<li>Lamb shift</li>
<li>HFS: nucleus</li>
<li>External field, B, E, EM field.</li>
</ul>
<p>Import physics system</p>

<ul>
<li>Harmonic oscillator</li>
<li>Two-level system</li>
<li>Hydrogen</li>
</ul>
<h2>Hydrogen atoms</h2>

<p>Rydberg formula follows from the simple Bohr model, also from Schrodinger
equation</p>


$$\begin{align}
E_n = - \left(\frac{1}{2}\frac{me^4}{\hbar^2}\frac{M}{M+m} \right)\frac{1}{n^2}
\end{align}$$


<p>where Rydberg constant $R_{\infty} = \frac{1}{2}\frac{me^4}{\hbar^2}$ which describes the
spectrum of a hydrogen atom where the nucleus has infinite mass, reduced mass factor
$\frac{M}{M + m}$ . Rydberg constant with reduced mass factor call $R_{H}$
, which determines the spectrum of hydrogen.</p>

<blockquote>小结:

\begin{align}
  E_n = - \frac{R}{n^2}
\end{align}
其中 $R = \frac{\mu e^4}{2\hbar^2}$ 有时也记作 $R_H = \frac{\mu e^4}{2\hbar^2}$, 其中 $\mu$ 是
reduced mass $\mu = \frac{m M}{m + M}$ . 如果 $M\to \infty$ 那么 $R_{\infty} =
\frac{me^4}{2\hbar^2}$</blockquote>

<p>Solution of Schrodinger Equation</p>

$$\begin{align}
\psi_{nlm} = R_nl(r)Y_{lm}(\theta, \phi)
\end{align}$$


<p>There are a number of noteworthy results.</p>

$$\begin{align}
E_n = - \frac{R_H}{n^2}
\end{align}$$

<p>Intuition for the size of the hydrogen atom, the size of hydrogen-like
atoms. The radius or the expectation value of the position of the electron</p>

$$\begin{align}
\langle r_{nl}\rangle = n^2 a_0 \left\{1 + \frac{1}{2}
            \left[ 1 - \frac{l(l + 1)}{n^{2}} \right] \right\}
\end{align}$$

<p>It's important to distinguish between the expectation value for the radius and
the inverse radius</p>

$$\begin{align}
\langle \frac{1}{r_{nl}} \rangle = \frac{1}{n^2 a_0}
\end{align}$$

<p>where $a_0 = \frac{\hbar^2}{\mu e^2}$</p>
<blockquote>Virial Theorem

\begin{align}
\langle T \rangle = \frac{1}{2} \langle \vec{r} \cdot \nabla V(\vec{r}) \rangle
\end{align}
for $V = r^n$ , $2\langle T \rangle = n\langle V\rangle$</blockquote>
<p>$\langle \frac{1}{r_{nl}} \rangle$ 的形式这样简单, 可以从 virial theorem 来理解. 总的能量的
形式 $E_n\sim \frac{1}{n^2}$ , 库仑势能 $\langle V\rangle \sim \langle \frac{1}{r}\rangle$ , 而根据 virial
theorm 有 $\langle T\rangle = -\frac{1}{2}\langle V\rangle$ ,
因此 $\langle \frac{1}{r}\rangle \sim \frac{1}{n^2}$ . 精确来讲</p>

$$\begin{align}
& -\frac{R_H}{n^2} = E_n = \langle T\rangle + \langle V\rangle
 = \frac{1}{2}\langle V\rangle = - \frac{1}{2}e^2\langle \frac{1}{r}\rangle \\
\Rightarrow& \langle \frac{1}{r_{nl}} \rangle = \frac{1}{n^2 a_0}
\end{align}$$

<p>In CGS units</p>

$$\begin{align}
R_H = \frac{1}{2} \frac{e^2}{a_0}
\end{align}$$

<p>is one half of the Coulomb energy at the Bohr radius, which is called *one
Hartree* $\frac{\mu e^4}{\hbar^2} = \frac{e^2}{a_0}$</p>

<p>The fundamental energy of the hydrogen atom, the fundamental unit of energy is
whatever energy you can construct using the electron mass, the electron charge
and $\hbar$ , and what you get is $1$ Hartree. If you ever wondered why the Rydberg
is $1/2$ Hartree, what happens is in the ground state of hydrogen, you have $1$
Hartree worth of Coulomb energy. But then because of the Virial theorem, you
have $-1/2$ of it as kinetic energy, and therefore, the binding energy in the
$n=1$ ground state, which is $1$ Rydberg, is $1/2$ Hartree. So this factor of
$1/2$ of the Virial theorem is responsible for this factor of $2$ for those two
energies.</p>

<p>In SI units: $e^2 \to \frac{e^2}{4\pi\epsilon_0}$</p>

<h2>Hydrogen-like atoms</h2>

<p>How do things depend on the nuclear charge $Z$ ? Because of the stronger Coulomb
attraction, all the length scales are divided by $Z$ . So everything is smaller
by factor of $Z$ . So what does that now imply for the energy? Well, you have a
Coulomb field which is $Z$ times stronger, but you probe it now at a $Z$ times
smaller radius. So therefore, the energies scale with $Z^2$</p>

$$\begin{align}
E_n = - \frac{R_H Z^2}{n^2}
\end{align}$$


<p>If you have a hydrogen-like atom, and the electron is in a state with principal
quantum number, no angular momentum. The probability for the electron to be at
the nucleus</p>

$$\begin{align}
|\psi_{n00}(0)|^2
\end{align}$$

<p>This will be very important later on, when we discuss hyperfine structure
because what is responsible is the fact that the electron can overlap with
nucleus. So this factor will appear in our discussion of hyperfine structure,
and what I want to ask you is how does this quantity depend on the principal
quantum number $n$ and on $Z$ ?</p>

<ul>
<li>A. $\frac{Z^3}{a_0^3 n^6}$</li>
<li>B. $\frac{Z}{a_0^3 n^2}$</li>
<li>C. $\frac{Z^3}{a_0^3 n^3}$</li>
<li>D. $\frac{Z^2}{a_0 n ^2}$</li>
</ul>
<p>The exact answer is $|\psi_{n00}(0)|^2 = \frac{Z^3}{\pi a_0^3 n^3}$</p>

<p>Z scaling: $e^2 \to Ze^2$ , $a_0 = \frac{\hbar^2}{m e^2}\to \frac{a_0}{Z}$ .
So if all length scales go as $\frac{1}{Z}$ . So the density goes $Z^3$</p>

<p>When we talk about the wave functions with principal quantum number $n$ , there
are two length scale. $\langle \frac{1}{r_{nl}}\rangle = \frac{Z}{a_0 n^2}$ scales with $n^2$
BUT, the characteristic length in the exponential decay of wave function is
$\frac{n a_0}{Z}$ scales with $n$ .</p>

<p>That is important for quantum defect and hyperfine structure.</p>

<p>For $l\neq 0$ , $\psi\propto r^l$ , $|\psi|\propto r^{2l}$ . For large $n$ , $|\psi|\propto
r^{2l}\frac{1}{n^3}$ .</p>

<h2>Reference</h2>

<ul>
<li>Feynman, R. P., Vernon, F. L. & Hellwarth, R. W. Geometrical Representation of the Schrödinger Equation for Solving Maser Problems. Journal of Applied Physics 28, 49–52 (1957).</li>
<li>Kleppner, D. The Yin and Yang of Hydrogen. Physics Today 52, 11–13 (1999).</li>
<li>Friedrich, H. Theoretical Atomic Physics. (Springer International Publishing, 2017). Chap 2.1.1 The Hydrogen Atom</li>
<li><a href='https://en.wikipedia.org/wiki/Virial_theorem'>wikipedia: Virial theorem</a></li>
<li><a href='https://en.wikipedia.org/wiki/Hartree'>wikipedia: Hartree</a></li>
</ul>

</section>

<section class="post-meta">
    <p>
        <a class="post-link" href="https://zqw.ink/tag/rabi-frequency.html">#Rabi frequency</a>
        <a class="post-link" href="https://zqw.ink/tag/adiabatic.html">#adiabatic</a>
        <a class="post-link" href="https://zqw.ink/tag/atomic-and-optical-physics.html">#Atomic and Optical Physics</a>
        <a class="post-link" href="https://zqw.ink/tag/density-matrix.html">#density matrix</a>
        <a class="post-link" href="https://zqw.ink/tag/density-operator.html">#density operator</a>
        <a class="post-link" href="https://zqw.ink/tag/quantum-defect.html">#quantum defect</a>
    </p>
</section>

  </main>
  <footer role="contentinfo">
    <p>Copyright &copy; 2018 - 2025 ZQW</p>
  </footer>
  <script>
  (function() {
    const key = 'theme';
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const saved = localStorage.getItem(key);
    const init = saved ? saved : 'system';
    const effective = init === 'system' ? (prefersDark ? 'dark' : 'light') : init;
    document.documentElement.setAttribute('data-theme', effective);
    updateThemeButton(effective);

    document.getElementById('theme-toggle')?.addEventListener('click', function () {
      const current = document.documentElement.getAttribute('data-theme') || 'light';
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem(key, next);
      updateThemeButton(next);
    });

    function updateThemeButton(theme) {
      const btn = document.getElementById('theme-toggle');
      if (btn) {
        btn.setAttribute('aria-label', theme === 'dark' ? '切换到浅色模式' : '切换到深色模式');
      }
    }
  })();
  </script>
  <script>
  (function() {
    const blocks = document.querySelectorAll('pre > code');
    blocks.forEach((code) => {
      const pre = code.parentElement;
      if (!pre) return;

      if (!pre.dataset.lang) {
        const cls = Array.from(code.classList);
        const langClass = cls.find((name) => name.startsWith('language-') || name.startsWith('lang-'));
        if (langClass) {
          const raw = langClass.replace(/^language-/, '').replace(/^lang-/, '');
          pre.dataset.lang = raw.replace(/_/g, ' ').toUpperCase();
        }
      }

      if (pre.querySelector('.copy-btn')) return;
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'copy-btn';
      btn.setAttribute('aria-label', '复制代码');
      btn.textContent = 'Copy';
      btn.addEventListener('click', async function () {
        try {
          await navigator.clipboard.writeText(code.innerText);
          btn.textContent = 'Copied';
        } catch (err) {
          const range = document.createRange();
          range.selectNodeContents(code);
          const selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
          try {
            document.execCommand('copy');
            btn.textContent = 'Copied';
          } finally {
            selection.removeAllRanges();
          }
        }
        setTimeout(() => {
          btn.textContent = 'Copy';
        }, 1500);
      });
      pre.appendChild(btn);
    });
  })();
  </script>
  <script>
  (function() {
    const toggle = document.getElementById('nav-toggle');
    const nav = document.getElementById('site-nav');
    if (!toggle || !nav) return;

    function closeNav() {
      nav.classList.remove('is-open');
      toggle.setAttribute('aria-expanded', 'false');
      toggle.setAttribute('aria-label', '打开菜单');
    }

    function openNav() {
      nav.classList.add('is-open');
      toggle.setAttribute('aria-expanded', 'true');
      toggle.setAttribute('aria-label', '关闭菜单');
    }

    toggle.addEventListener('click', function (event) {
      event.stopPropagation();
      const isOpen = nav.classList.contains('is-open');
      if (isOpen) {
        closeNav();
      } else {
        openNav();
      }
    });

    nav.querySelectorAll('a').forEach((link) => {
      link.addEventListener('click', closeNav);
    });

    document.addEventListener('click', function (event) {
      if (!nav.classList.contains('is-open')) return;
      if (nav.contains(event.target) || toggle.contains(event.target)) return;
      closeNav();
    });
  })();
  </script>
</body>

</html>